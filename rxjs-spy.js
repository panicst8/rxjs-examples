!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).RxSpy=e()}}(function(){return function e(t,n,r){function o(s,u){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return o(n||e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=window.Rx,o=e("../../operator/tag");r.Observable.prototype.tag=o.tag},{"../../operator/tag":7}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){},o=r;n.detect=function(e){o(e)},n.hook=function(e){o=e||r}},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e){this.detectorRecords_=new Map,this.snapshotPlugin_=e}return e.prototype.detect=function(e){var t=this,n=t.detectorRecords_,r=t.snapshotPlugin_;if(!r)return console.warn("Snapshotting is not enabled."),null;var o=n.get(e),i=this.record_(r.snapshotAll());if(o?o.snapshotRecords.push(i):(o={snapshotRecords:[i]},n.set(e,o)),o.snapshotRecords.length>2&&o.snapshotRecords.shift(),o.snapshotRecords.length<2)return null;var s=o.snapshotRecords,u=s[0],a=s[1];return this.compare_(e,u,a)},e.prototype.compare_=function(e,t,n){var r=[],o=[],i=[],s=[],u=t.rootSubscriptions,a=n.rootSubscriptions;return u.forEach(function(e,t){a.has(t)||o.push(e)}),a.forEach(function(e,t){var n=u.get(t);if(n){var o=n.merges,a=e.merges;o.forEach(function(e,t){a.has(t)||s.push(e)}),a.forEach(function(e,t){o.has(t)||i.push(e)})}else r.push(e)}),0===i.length&&0===s.length&&0===r.length&&0===o.length?null:{mergeSubscriptions:i,mergeUnsubscriptions:s,subscriptions:r.map(function(e){return e.subscriptionSnapshot}),unsubscriptions:o.map(function(e){return e.subscriptionSnapshot})}},e.prototype.findMergedSubscriptions_=function(e,t){var n=t.merges,r=t.subscriptionSnapshot;e.subscriptions.forEach(function(e){e.rootSink===r&&e.merges.forEach(function(e){var t=e.subscription;t.closed||n.set(t,e)})})},e.prototype.findRootSubscriptions_=function(e,t){var n=this;e.observables.forEach(function(r){r.subscribers.forEach(function(r){r.subscriptions.forEach(function(r){var o=r.complete,i=r.error,s=r.sink,u=r.subscription;if(!(o||i||s||u.closed)){var a={merges:new Map,subscriptionSnapshot:r};n.findMergedSubscriptions_(e,a),t.set(u,a)}})})})},e.prototype.record_=function(e){var t=new Map;return this.findRootSubscriptions_(e,t),{rootSubscriptions:t,snapshot:e}},e}();n.Detector=r},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("./add/operator/tag");var r=e("./detect");n.detect=r.detect;var o=e("./logger");n.defaultLogger=o.defaultLogger,n.toLogger=o.toLogger;var i=e("./match");n.matches=i.matches;var s=e("./plugin");n.BasePlugin=s.BasePlugin;var u=e("./spy");n.debug=u.debug,n.find=u.find,n.findAll=u.findAll,n.flush=u.flush,n._let=u._let,n.log=u.log,n.pause=u.pause,n.plugin=u.plugin,n.plugins=u.plugins,n.show=u.show,n.spy=u.spy},{"./add/operator/tag":1,"./detect":2,"./logger":5,"./match":6,"./plugin":11,"./spy":18}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.defaultLogger=console,n.toLogger=function(e){function t(t,r){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];var s=" ".repeat(n);r=r?s+r:s,(u=e[t]||e.log).call.apply(u,[e,r].concat(o));var u}if(e.error&&e.group&&e.groupCollapsed&&e.groupEnd&&e.warn)return e;var n=0;return{error:function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];t.apply(void 0,["error",e].concat(n))},group:function(e){t("log",e),n+=2},groupCollapsed:function(e){t("log",e),n+=2},groupEnd:function(){n=Math.max(0,n-2)},log:function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];t.apply(void 0,["log",e].concat(n))},warn:function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];t.apply(void 0,["warn",e].concat(n))}}}},{}],6:[function(e,t,n){"use strict";function r(e){var t=e.operator;if(!t)return null;var n=t.tag;return n||null}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./util");n.matches=function(e,t){if(o.isObservable(t))return e===t;var n=r(e);return"function"==typeof t?t(n,e):null!==n&&("string"==typeof t?t===n:t.test(n))},n.read=r,n.toString=function(e){return o.isObservable(e)?"[Observable]":"function"==typeof e?"[Function]":e.toString()}},{"./util":20}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../operators/tag");n.tag=function(e){return r.tag(e)(this)}},{"../operators/tag":8}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.tag=function(e){return function(t){return t.lift(new r(e))}};var r=function(){function e(e){this.tag=e}return e.prototype.call=function(e,t){return t.subscribe(e)},e}()},{}],9:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../match"),i=function(e){function t(t,n){var r=e.call(this)||this;return r.notifications_=n,r.matcher_=function(e,n){return o.matches(e,t)&&-1!==r.notifications_.indexOf(n)},r}return r(t,e),t.prototype.beforeComplete=function(e){(0,this.matcher_)(e.observable,"complete")},t.prototype.beforeError=function(e,t){(0,this.matcher_)(e.observable,"error")},t.prototype.beforeNext=function(e,t){(0,this.matcher_)(e.observable,"next")},t.prototype.beforeSubscribe=function(e){(0,this.matcher_)(e.observable,"subscribe")},t.prototype.beforeUnsubscribe=function(e){(0,this.matcher_)(e.observable,"unsubscribe")},t}(e("./plugin").BasePlugin);n.DebugPlugin=i},{"../match":6,"./plugin":15}],10:[function(e,t,n){"use strict";function r(e){return e[u]}function o(e,t){return e[u]=t,t}var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=e("./plugin"),u=Symbol("graphRef");n.getGraphRef=r;var a=function(e){function t(t){var n=(void 0===t?{}:t).keptDuration,r=void 0===n?3e4:n,o=e.call(this)||this;return o.keptDuration_=r,o.notifications_=[],o.sentinel_={link:null,merges:[],mergesFlushed:0,rootSink:null,sentinel:null,sink:null,sources:[],sourcesFlushed:0},o.sentinel_.link=o.sentinel_,o.sentinel_.sentinel=o.sentinel_,o}return i(t,e),t.prototype.afterNext=function(e,t){this.notifications_.pop()},t.prototype.afterSubscribe=function(e){this.notifications_.pop()},t.prototype.afterUnsubscribe=function(e){var t=this,n=t.notifications_;t.sentinel_;n.pop();var r=n.length;0!==r&&"unsubscribe"===n[r-1].notification||this.flush_(e)},t.prototype.beforeNext=function(e,t){this.notifications_.push({notification:"next",ref:e})},t.prototype.beforeSubscribe=function(e){var t=this,n=t.notifications_,i=t.sentinel_,s=o(e,{link:i,merges:[],mergesFlushed:0,rootSink:null,sentinel:i,sink:null,sources:[],sourcesFlushed:0}),u=n.length;if(u>0&&"next"===n[u-1].notification)(l=r(c=n[u-1].ref)).merges.push(e),s.link=l,s.rootSink=l.rootSink||c,s.sink=c;else for(var a=u-1;a>-1;--a)if("subscribe"===n[a].notification){var c=n[u-1].ref,l=r(c);l.sources.push(e),s.link=l,s.rootSink=l.rootSink||c,s.sink=c;break}s.link===s.sentinel&&s.sentinel.sources.push(e),n.push({notification:"subscribe",ref:e})},t.prototype.beforeUnsubscribe=function(e){this.notifications_.push({notification:"unsubscribe",ref:e})},t.prototype.flush_=function(e){var t=this,n=r(e),o=n.merges,i=n.sources;if(e.unsubscribed&&o.every(function(e){return e.unsubscribed})&&i.every(function(e){return e.unsubscribed})){this.sentinel_;var s=n.link,u=n.sink,a=this.keptDuration_,c=function(){var n=s.merges,r=s.sources,o=n.indexOf(e);-1!==o&&(n.splice(o,1),++s.mergesFlushed);var i=r.indexOf(e);-1!==i&&(r.splice(i,1),++s.sourcesFlushed),u&&u.unsubscribed&&t.flush_(u)};0===a?c():a>0&&a<1/0&&setTimeout(c,a)}},t}(s.BasePlugin);n.GraphPlugin=a},{"./plugin":15}],11:[function(e,t,n){"use strict";function r(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),r(e("./debug-plugin")),r(e("./graph-plugin")),r(e("./let-plugin")),r(e("./log-plugin")),r(e("./pause-plugin")),r(e("./plugin")),r(e("./snapshot-plugin")),r(e("./stack-trace-plugin"))},{"./debug-plugin":9,"./graph-plugin":10,"./let-plugin":12,"./log-plugin":13,"./pause-plugin":14,"./plugin":15,"./snapshot-plugin":16,"./stack-trace-plugin":17}],12:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../match"),i=function(e){function t(t,n){var r=e.call(this)||this;return r.match_=t,r.select_=n,r}return r(t,e),t.prototype.select=function(e){var t=this,n=t.match_,r=t.select_,i=e.observable;return o.matches(i,n)?r:null},t}(e("./plugin").BasePlugin);n.LetPlugin=i},{"../match":6,"./plugin":15}],13:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("./graph-plugin"),i=e("../logger"),s=e("../match"),u=e("./plugin"),a=e("./snapshot-plugin"),c=e("./stack-trace-plugin"),l=function(e){function t(t,n){void 0===n&&(n=i.defaultLogger);var r=e.call(this)||this;return r.logger_=i.toLogger(n),r.match_=t,r}return r(t,e),t.prototype.beforeComplete=function(e){this.log_(e,"complete")},t.prototype.beforeError=function(e,t){this.log_(e,"error",t)},t.prototype.beforeNext=function(e,t){this.log_(e,"next",t)},t.prototype.beforeSubscribe=function(e){this.log_(e,"subscribe")},t.prototype.beforeUnsubscribe=function(e){this.log_(e,"unsubscribe")},t.prototype.log_=function(e,t,n){var r=this,i=r.logger_,u=r.match_,l=e.observable;e.subscriber;if(s.matches(l,u)){var p=s.read(l),f="string"==typeof u?"":"; matching "+s.toString(u);switch(t){case"error":i.group("Tag = "+p+"; notification = "+t+f),i.error("Error =",n);break;case"next":i.group("Tag = "+p+"; notification = "+t+f),i.log("Value =",n);break;default:i.groupCollapsed("Tag = "+p+"; notification = "+t+f)}var g=o.getGraphRef(e),h=a.getSnapshotRef(e);if(g||h){var b=h.values,d=h.valuesFlushed;if(i.groupCollapsed("Subscriber"),h&&(i.log("Value count =",b.length+d),b.length>0&&i.log("Last value =",b[b.length-1].value)),g){i.groupCollapsed("Subscription");var m=g.rootSink;i.log("Root subscribe",m?c.getStackTrace(m):c.getStackTrace(e)),i.groupEnd()}i.groupEnd()}i.groupCollapsed("Raw observable"),i.log(l),i.groupEnd(),i.groupEnd()}},t}(u.BasePlugin);n.LogPlugin=l},{"../logger":5,"../match":6,"./graph-plugin":10,"./plugin":15,"./snapshot-plugin":16,"./stack-trace-plugin":17}],14:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=window.Rx,i=e("../logger"),s=e("../match"),u=e("./plugin"),a=e("../spy");window.Rx.unused,window.Rx.unused;var c=function(){function e(e){this.paused_=!0,this.states_=new Map,this.match_=e}return Object.defineProperty(e.prototype,"paused",{get:function(){return this.paused_},enumerable:!0,configurable:!0}),e.prototype.clear=function(e){void 0===e&&(e=function(){return!0}),this.states_.forEach(function(t){t.notifications_=t.notifications_.filter(function(t){return!e(t)})})},e.prototype.log=function(e){void 0===e&&(e=i.defaultLogger);var t=i.toLogger(e);t.group("Deck matching "+s.toString(this.match_)),t.log("Paused =",this.paused_),this.states_.forEach(function(e){t.group("Observable; tag = "+e.tag_),t.log("Notifications =",e.notifications_),t.groupEnd()}),t.groupEnd()},e.prototype.pause=function(){this.paused_=!0},e.prototype.resume=function(){this.states_.forEach(function(e){for(;e.notifications_.length>0;)e.subject_.next(e.notifications_.shift())}),this.paused_=!1},e.prototype.select=function(e){var t=this,n=e.observable;return function(e){var r=t.states_.get(n);return r?r.subscription_.unsubscribe():(r={notifications_:[],subject_:new o.Subject,subscription_:null,tag_:s.read(n)},t.states_.set(n,r)),r.subscription_=a.subscribeWithoutSpy.call(e.materialize(),{next:function(e){t.paused_?r.notifications_.push(e):r.subject_.next(e)}}),r.subject_.asObservable().dematerialize()}},e.prototype.skip=function(){this.states_.forEach(function(e){e.notifications_.length>0&&e.notifications_.shift()})},e.prototype.step=function(){this.states_.forEach(function(e){e.notifications_.length>0&&e.subject_.next(e.notifications_.shift())})},e.prototype.unsubscribe=function(){this.states_.forEach(function(e){e.subscription_&&(e.subscription_.unsubscribe(),e.subscription_=null)})},e}();n.Deck=c;var l=function(e){function t(t){var n=e.call(this)||this;return n.deck_=new c(t),n.match_=t,n}return r(t,e),Object.defineProperty(t.prototype,"deck",{get:function(){return this.deck_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"match",{get:function(){return this.match_},enumerable:!0,configurable:!0}),t.prototype.select=function(e){var t=this,n=t.deck_,r=t.match_,o=e.observable;return s.matches(o,r)?n.select(e):null},t.prototype.teardown=function(){var e=this.deck_;e&&(e.resume(),e.unsubscribe())},t}(u.BasePlugin);n.PausePlugin=l},{"../logger":5,"../match":6,"../spy":18,"./plugin":15}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.afterComplete=function(e){},e.prototype.afterError=function(e,t){},e.prototype.afterNext=function(e,t){},e.prototype.afterSubscribe=function(e){},e.prototype.afterUnsubscribe=function(e){},e.prototype.beforeComplete=function(e){},e.prototype.beforeError=function(e,t){},e.prototype.beforeNext=function(e,t){},e.prototype.beforeSubscribe=function(e){},e.prototype.beforeUnsubscribe=function(e){},e.prototype.flush=function(){},e.prototype.select=function(e){return null},e.prototype.teardown=function(){},e}();n.BasePlugin=r},{}],16:[function(e,t,n){"use strict";function r(e){return e[p]}function o(e,t){return e[p]=t,t}var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=e("../match"),u=e("./graph-plugin"),a=e("./plugin"),c=e("./stack-trace-plugin"),l=e("../tick"),p=Symbol("snapshotRef");n.getSnapshotRef=r;var f=function(e){function t(t){var n=(void 0===t?{}:t).keptValues,r=void 0===n?4:n,o=e.call(this)||this;return o.keptValues_=r,o.sentinel_=null,o}return i(t,e),t.prototype.afterUnsubscribe=function(e){var t=r(e);t.tick=l.tick(),t.unsubscribed=!0},t.prototype.beforeComplete=function(e){var t=r(e);t.tick=l.tick(),t.complete=!0},t.prototype.beforeError=function(e,t){var n=r(e);n.tick=l.tick(),n.error=t},t.prototype.beforeNext=function(e,t){var n=l.tick(),o=r(e);o.tick=n,o.values.push({tick:n,timestamp:Date.now(),value:t});var i=this.keptValues_,s=o.values.length-i;s>0&&(o.values.splice(0,s),o.valuesFlushed+=s)},t.prototype.beforeSubscribe=function(e){o(e,{complete:!1,error:null,tick:l.tick(),timestamp:Date.now(),unsubscribed:!1,values:[],valuesFlushed:0});var t=u.getGraphRef(e);t?this.sentinel_=t.sentinel:console.warn("Graphing is not enabled.")},t.prototype.snapshotAll=function(e){var t=(void 0===e?{}:e).since,n=new Map,o=new Map,i=new Map,a=this.getSubscriptionRefs_();return a.forEach(function(e,t){var a=t.id,l=t.observable,p=t.subscriber,f=t.subscription,g=u.getGraphRef(t),h=g.mergesFlushed,b=g.sourcesFlushed,d=r(t),m=d.complete,v=d.error,_=d.tick,y=d.timestamp,w=d.unsubscribed,S=d.values,O=d.valuesFlushed,k={complete:m,error:v,id:a,merges:new Map,mergesFlushed:h,observable:l,rootSink:null,sink:null,sources:new Map,sourcesFlushed:b,stackTrace:c.getStackTrace(t),subscriber:p,subscription:f,tick:_,timestamp:y,unsubscribed:w};i.set(f,k);var E=o.get(p);E||(E={subscriber:p,subscriptions:new Map,tick:_,values:[],valuesFlushed:0},o.set(p,E)),E.subscriptions.set(f,k),E.tick=Math.max(E.tick,_),(L=E.values).push.apply(L,S),E.valuesFlushed+=O;var C=n.get(l);C||(C={observable:l,subscribers:new Map,tag:s.read(l),tick:_},n.set(l,C)),C.subscribers.set(p,E),C.tick=Math.max(C.tick,_);var L}),a.forEach(function(e,t){var n=u.getGraphRef(t),r=i.get(t.subscription);n.sink&&(r.sink=i.get(n.sink.subscription)),n.rootSink&&(r.rootSink=i.get(n.rootSink.subscription)),n.merges.forEach(function(e){return r.merges.set(e.subscription,i.get(e.subscription))}),n.sources.forEach(function(e){return r.sources.set(e.subscription,i.get(e.subscription))})}),o.forEach(function(e){e.values.sort(function(e,t){return e.tick-t.tick})}),void 0!==t&&(n.forEach(function(e,r){e.tick<=t.tick&&n.delete(r)}),o.forEach(function(e,n){e.tick<=t.tick&&o.delete(n)}),i.forEach(function(e,n){e.tick<=t.tick&&i.delete(n)})),{observables:n,subscribers:o,subscriptions:i,tick:l.tick()}},t.prototype.snapshotObservable=function(e){return this.snapshotAll().observables.get(e.observable)||null},t.prototype.snapshotSubscriber=function(e){return this.snapshotAll().subscribers.get(e.subscriber)||null},t.prototype.addSubscriptionRefs_=function(e,t){var n=this;t.set(e,!0);var r=u.getGraphRef(e);r.merges.forEach(function(e){return n.addSubscriptionRefs_(e,t)}),r.sources.forEach(function(e){return n.addSubscriptionRefs_(e,t)})},t.prototype.getSubscriptionRefs_=function(){var e=this,t=this.sentinel_,n=new Map;return t&&t.sources.forEach(function(t){return e.addSubscriptionRefs_(t,n)}),n},t}(a.BasePlugin);n.SnapshotPlugin=f},{"../match":6,"../tick":19,"./graph-plugin":10,"./plugin":15,"./stack-trace-plugin":17}],17:[function(e,t,n){"use strict";function r(e){return e[c]}function o(e,t){return e[c]=t,t}function i(){var e=!1;return{filter:function(t){var n=e;return/subscribeWithSpy/.test(t.functionName)&&(e=!0),n}}}var s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var u=e("stacktrace-js"),a=e("./plugin"),c=Symbol("stackTraceRef");n.getStackTrace=function(e){var t=r(e);return t?t.stackTrace:[]},n.getStackTraceRef=r;var l=function(e){function t(t){var n=(void 0===t?{}:t).sourceMaps,r=void 0===n||n,o=e.call(this)||this;return o.sourceMaps_=r,o}return s(t,e),t.prototype.beforeSubscribe=function(e){var t={sourceMapsResolved:Promise.resolve(),stackTrace:u.getSync(i())};o(e,t),this.sourceMaps_&&"undefined"!=typeof window&&"file:"!==window.location.protocol&&(t.sourceMapsResolved=u.get(i()).then(function(e){var n=t.stackTrace;n.splice.apply(n,[0,n.length].concat(e))}))},t}(a.BasePlugin);n.StackTracePlugin=l},{"./plugin":15,"stacktrace-js":32}],18:[function(e,t,n){"use strict";function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return 0===t.length&&(t=["complete","error","next","subscribe","unsubscribe"]),l(new O.DebugPlugin(e,t),"debug("+S.toString(e)+")")}function o(e){var t=P.find(function(t){return t instanceof e});return t||null}function i(e){return P.filter(function(t){return t instanceof e})}function s(){P.forEach(function(e){return e.flush()})}function u(e,t){return l(new O.LetPlugin(e,t),"let("+S.toString(e)+")")}function a(e,t){var n=/.+/;return e?"function"==typeof e.log&&(t=e,e=n):e=n,l(new O.LogPlugin(e,t),"log("+S.toString(e)+")")}function c(e){var t=new O.PausePlugin(e),n=l(t,"pause("+S.toString(e)+")"),r=t.deck;return r.teardown=n,r}function l(e,t){P.push(e),A.next(P);var n=function(){e.teardown(),P=P.filter(function(t){return t!==e}),A.next(P),M=M.filter(function(e){return e.teardown!==n})};return M.push({name:t,teardown:n}),n}function p(e,t){void 0===t&&(t=w.defaultLogger);var n=/.+/;e?"function"==typeof e.log&&(t=e,e=n):e=n;var r=o(O.SnapshotPlugin);if(r){var i=r.snapshotAll(),s=Array.from(i.observables.values()).filter(function(t){return S.matches(t.observable,e)}),u=w.toLogger(t),a=s.length>3?"groupCollapsed":"group";u.group(s.length+" snapshot(s) matching "+S.toString(e)),s.forEach(function(e){var t=e.subscribers;u[a].call(u,"Tag = "+e.tag);var n=t.size>3?"groupCollapsed":"group";u.group(t.size+" subscriber(s)"),t.forEach(function(e){var t=e.values,r=e.valuesFlushed;u[n].call(u,"Subscriber"),u.log("Value count =",t.length+r),t.length>0&&u.log("Last value =",t[t.length-1].value);var o=e.subscriptions;u.groupCollapsed(o.size+" subscription(s)"),o.forEach(function(e){var t=e.complete,n=e.error,r=e.rootSink,o=e.stackTrace,i=e.unsubscribed;u.log("State =",t?"complete":n?"error":"incomplete"),n&&u.error("Error =",n),i&&u.error("Unsubscribed =",!0),u.log("Root subscribe",r?r.stackTrace:o)}),u.groupEnd(),u.groupEnd()}),u.groupEnd(),u.groupCollapsed("Raw snapshot"),u.log(e),u.groupEnd(),u.groupEnd()}),u.groupEnd()}else console.warn("Snapshotting is not enabled.")}function f(e){void 0===e&&(e={});var t=e.plugins,n=e.warning;if(m.Observable.prototype.subscribe!==C)throw new Error("Already spying on Observable.prototype.subscribe.");n&&console.warn("Spying on Observable.prototype.subscribe."),m.Observable.prototype.subscribe=b,P=t||[new O.StackTracePlugin(e),new O.GraphPlugin(e),new O.SnapshotPlugin(e)],A.next(P);var r=new y.Detector(o(O.SnapshotPlugin));_.hook(function(e){return h(e,r)});var i=function(){_.hook(null),P.forEach(function(e){return e.teardown()}),P=[],A.next(P),A=new d.BehaviorSubject(P),M=[],m.Observable.prototype.subscribe=C};return M.push({name:"spy",teardown:i}),i}function g(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=m.Observable.prototype.subscribe;m.Observable.prototype.subscribe=C;try{return m.Observable.prototype.subscribe.apply(this,e)}finally{m.Observable.prototype.subscribe=n}}function h(e,t){function n(e,t,n){e.group(t),e.log("Root subscribe",n.rootSink?n.rootSink.stackTrace:n.stackTrace),e.log("Subscribe",n.stackTrace),e.groupEnd()}var r=t.detect(e),o=w.toLogger(w.defaultLogger);r&&(o.group("Subscription changes detected; id = '"+e+"'"),r.subscriptions.forEach(function(e){n(o,"Subscription",e)}),r.unsubscriptions.forEach(function(e){n(o,"Unsubscription",e)}),r.mergeSubscriptions.forEach(function(e){n(o,"Merge subscription",e)}),r.mergeUnsubscriptions.forEach(function(e){n(o,"Merge unsubscription",e)}),o.groupEnd())}function b(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this,r=E.toSubscriber.apply(null,e),o={id:++L,observable:n,subscriber:r,subscription:null,timestamp:Date.now(),unsubscribed:!1},i={complete:function(){k.increment(),P.forEach(function(e){return e.beforeComplete(o)}),r.complete(),P.forEach(function(e){return e.afterComplete(o)})},error:function(e){e instanceof Error||console.warn("Value passed as error notification is not an Error instance =",e),k.increment(),P.forEach(function(t){return t.beforeError(o,e)}),r.error(e),P.forEach(function(t){return t.afterError(o,e)})},next:function(e){k.increment(),P.forEach(function(t){return t.beforeNext(o,e)}),r.next(e),P.forEach(function(t){return t.afterNext(o,e)})},unsubscribed:!1},s=E.toSubscriber(i.next.bind(i),i.error.bind(i),i.complete.bind(i)),u={complete:function(){this.completed=!0,this.preLetSubject?this.preLetSubject.complete():this.postLetSubscriber.complete()},completed:!1,error:function(e){this.errored=!0,this.preLetSubject?this.preLetSubject.error(e):this.postLetSubscriber.error(e)},errored:!1,let:function(e){var t=this,n=e.map(function(e){return e.select(o)}).filter(Boolean);if(n.length>0){this.preLetSubject||(this.preLetSubject=new v.Subject),this.postLetSubscription&&this.postLetSubscription.unsubscribe();var r=this.preLetSubject.asObservable();n.forEach(function(e){return r=r.let(e)}),this.postLetSubscription=g.call(r,{complete:function(){return t.postLetSubscriber.complete()},error:function(e){return t.postLetSubscriber.error(e)},next:function(e){return t.postLetSubscriber.next(e)}})}else this.postLetSubscription&&(this.postLetSubscription.unsubscribe(),this.postLetSubscription=null,this.preLetSubject=null)},next:function(e){this.preLetSubject?this.preLetSubject.next(e):this.postLetSubscriber.next(e)},postLetSubscriber:s,postLetSubscription:null,preLetSubject:null,unsubscribed:!1},a=E.toSubscriber(u.next.bind(u),u.error.bind(u),u.complete.bind(u)),c=g.call(A,{next:function(e){return u.let(e)}}),l=a.unsubscribe;a.unsubscribe=function(){u.unsubscribed||(u.unsubscribed=!0,u.completed||u.errored||(u.postLetSubscription&&(u.postLetSubscription.unsubscribe(),u.postLetSubscription=null),u.postLetSubscriber.unsubscribe())),l.call(a)},r.add(a);var p=s.unsubscribe;s.unsubscribe=function(){i.unsubscribed?p.call(s):(i.unsubscribed=!0,k.increment(),P.forEach(function(e){return e.beforeUnsubscribe(o)}),p.call(s),c.unsubscribe(),o.unsubscribed=!0,P.forEach(function(e){return e.afterUnsubscribe(o)}))},k.increment(),P.forEach(function(e){return e.beforeSubscribe(o)});var f=C.call(n,a);return o.subscription=f,P.forEach(function(e){return e.afterSubscribe(o)}),f}Object.defineProperty(n,"__esModule",{value:!0});var d=window.Rx,m=window.Rx,v=window.Rx,_=e("./detect"),y=e("./detector"),w=e("./logger"),S=e("./match"),O=e("./plugin"),k=e("./tick"),E=e("./util");window.Rx.unused;var C=m.Observable.prototype.subscribe,L=0,P=[],A=new d.BehaviorSubject(P),M=[];if("undefined"!=typeof window){var x={deck:function(e){var t=i(O.PausePlugin);if(void 0!==e){var n=t[e-1];return n?n.deck:null}var r=w.toLogger(w.defaultLogger);r.group(t.length+" Deck(s)"),t.forEach(function(e,t){r.log(t+1+" pause("+S.toString(e.match)+")")}),r.groupEnd()},debug:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.apply(null,e)},detect:function(e){void 0===e&&(e=""),_.detect(e)},flush:function(){s()},let:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];u.apply(null,e)},log:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];a.apply(null,e)},pause:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c.apply(null,e)},show:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];p.apply(null,e)},spy:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];f.apply(null,e)},undo:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length){var n=w.toLogger(w.defaultLogger);n.group(M.length+" undo(s)"),M.forEach(function(e,t){n.log(t+1+" "+e.name)}),n.groupEnd()}else e.map(function(e){return M[e-1]}).forEach(function(e){e&&e.teardown()})}};window.rxSpy=x}n.debug=r,n.find=o,n.findAll=i,n.flush=s,n._let=u,n.log=a,n.pause=c,n.plugin=l,n.plugins=function(){return P.slice()},n.show=p,n.spy=f,n.subscribeWithoutSpy=g},{"./detect":2,"./detector":3,"./logger":5,"./match":6,"./plugin":11,"./tick":19,"./util":20}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=0;n.increment=function(){++r},n.tick=function(){return r}},{}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=window.Rx,o=window.Rx.Symbol;n.isObservable=function(e){return e&&e.subscribe};var i={closed:!0,error:function(e){throw e},next:function(e){},complete:function(){}};n.toSubscriber=function(e,t,n){if(e){if(e instanceof r.Subscriber)return e;if(e[o.rxSubscriber])return e[o.rxSubscriber]()}return e||t||n?new r.Subscriber(e,t,n):new r.Subscriber(i)}},{}],21:[function(e,t,n){!function(r,o){"use strict";"object"==typeof n?t.exports=o(e("stackframe")):r.ErrorStackParser=o(r.StackFrame)}(this,function(e){"use strict";var t=/(^|@)\S+\:\d+/,n=/^\s*at .*(\S+\:\d+|\(native\))/m,r=/^(eval@)?(\[native code\])?$/;return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(n))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(e.replace(/[\(\)]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(t){return t.stack.split("\n").filter(function(e){return!!e.match(n)},this).map(function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var n=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),r=this.extractLocation(n.pop()),o=n.join(" ")||void 0,i=["eval","<anonymous>"].indexOf(r[0])>-1?void 0:r[0];return new e({functionName:o,fileName:i,lineNumber:r[1],columnNumber:r[2],source:t})},this)},parseFFOrSafari:function(t){return t.stack.split("\n").filter(function(e){return!e.match(r)},this).map(function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e({functionName:t});var n=t.split("@"),r=this.extractLocation(n.pop()),o=n.join("@")||void 0;return new e({functionName:o,fileName:r[0],lineNumber:r[1],columnNumber:r[2],source:t})},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,r=t.message.split("\n"),o=[],i=2,s=r.length;i<s;i+=2){var u=n.exec(r[i]);u&&o.push(new e({fileName:u[2],lineNumber:u[1],source:r[i]}))}return o},parseOpera10:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=t.stacktrace.split("\n"),o=[],i=0,s=r.length;i<s;i+=2){var u=n.exec(r[i]);u&&o.push(new e({functionName:u[3]||void 0,fileName:u[2],lineNumber:u[1],source:r[i]}))}return o},parseOpera11:function(n){return n.stack.split("\n").filter(function(e){return!!e.match(t)&&!e.match(/^Error created at/)},this).map(function(t){var n,r=t.split("@"),o=this.extractLocation(r.pop()),i=r.shift()||"",s=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;i.match(/\(([^\)]*)\)/)&&(n=i.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var u=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new e({functionName:s,args:u,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:t})},this)}}})},{stackframe:23}],22:[function(e,t,n){!function(r,o){"use strict";"object"==typeof n?t.exports=o(e("stackframe")):r.StackGenerator=o(r.StackFrame)}(this,function(e){return{backtrace:function(t){var n=[],r=10;"object"==typeof t&&"number"==typeof t.maxStackSize&&(r=t.maxStackSize);for(var o=arguments.callee;o&&n.length<r;){for(var i=new Array(o.arguments.length),s=0;s<i.length;++s)i[s]=o.arguments[s];/function(?:\s+([\w$]+))+\s*\(/.test(o.toString())?n.push(new e({functionName:RegExp.$1||void 0,args:i})):n.push(new e({args:i}));try{o=o.caller}catch(e){break}}return n}}})},{stackframe:23}],23:[function(e,t,n){!function(e,r){"use strict";"object"==typeof n?t.exports=r():e.StackFrame=r()}(this,function(){"use strict";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e){return e.charAt(0).toUpperCase()+e.substring(1)}function n(e){return function(){return this[e]}}function r(e){if(e instanceof Object)for(var n=0;n<u.length;n++)e.hasOwnProperty(u[n])&&void 0!==e[u[n]]&&this["set"+t(u[n])](e[u[n]])}var o=["isConstructor","isEval","isNative","isToplevel"],i=["columnNumber","lineNumber"],s=["fileName","functionName","source"],u=o.concat(i,s,["args"]);r.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof r)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new r(e)}},toString:function(){return(this.getFunctionName()||"{anonymous}")+("("+(this.getArgs()||[]).join(",")+")")+(this.getFileName()?"@"+this.getFileName():"")+(e(this.getLineNumber())?":"+this.getLineNumber():"")+(e(this.getColumnNumber())?":"+this.getColumnNumber():"")}};for(var a=0;a<o.length;a++)r.prototype["get"+t(o[a])]=n(o[a]),r.prototype["set"+t(o[a])]=function(e){return function(t){this[e]=Boolean(t)}}(o[a]);for(var c=0;c<i.length;c++)r.prototype["get"+t(i[c])]=n(i[c]),r.prototype["set"+t(i[c])]=function(t){return function(n){if(!e(n))throw new TypeError(t+" must be a Number");this[t]=Number(n)}}(i[c]);for(var l=0;l<s.length;l++)r.prototype["get"+t(s[l])]=n(s[l]),r.prototype["set"+t(s[l])]=function(e){return function(t){this[e]=String(t)}}(s[l]);return r})},{}],24:[function(e,t,n){function r(){this._array=[],this._set=Object.create(null)}/*
 * Copyright 2011 Mozilla Foundation and contributors
 * Licensed under the New BSD license. See LICENSE or:
 * http://opensource.org/licenses/BSD-3-Clause
 */
var o=e("./util"),i=Object.prototype.hasOwnProperty;r.fromArray=function(e,t){for(var n=new r,o=0,i=e.length;o<i;o++)n.add(e[o],t);return n},r.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},r.prototype.add=function(e,t){var n=o.toSetString(e),r=i.call(this._set,n),s=this._array.length;r&&!t||this._array.push(e),r||(this._set[n]=s)},r.prototype.has=function(e){var t=o.toSetString(e);return i.call(this._set,t)},r.prototype.indexOf=function(e){var t=o.toSetString(e);if(i.call(this._set,t))return this._set[t];throw new Error('"'+e+'" is not in the set.')},r.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},r.prototype.toArray=function(){return this._array.slice()},n.ArraySet=r},{"./util":30}],25:[function(e,t,n){function r(e){return e<0?1+(-e<<1):0+(e<<1)}function o(e){var t=e>>1;return 1==(1&e)?-t:t}/*
 * Copyright 2011 Mozilla Foundation and contributors
 * Licensed under the New BSD license. See LICENSE or:
 * http://opensource.org/licenses/BSD-3-Clause
 *
 * Based on the Base 64 VLQ implementation in Closure Compiler:
 * https://code.google.com/p/closure-compiler/source/browse/trunk/src/com/google/debugging/sourcemap/Base64VLQ.java
 *
 * Copyright 2011 The Closure Compiler Authors. All rights reserved.
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *  * Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 *  * Redistributions in binary form must reproduce the above
 *    copyright notice, this list of conditions and the following
 *    disclaimer in the documentation and/or other materials provided
 *    with the distribution.
 *  * Neither the name of Google Inc. nor the names of its
 *    contributors may be used to endorse or promote products derived
 *    from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
var i=e("./base64");n.encode=function(e){var t,n="",o=r(e);do{t=31&o,(o>>>=5)>0&&(t|=32),n+=i.encode(t)}while(o>0);return n},n.decode=function(e,t,n){var r,s,u=e.length,a=0,c=0;do{if(t>=u)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(s=i.decode(e.charCodeAt(t++))))throw new Error("Invalid base64 digit: "+e.charAt(t-1));r=!!(32&s),a+=(s&=31)<<c,c+=5}while(r);n.value=o(a),n.rest=t}},{"./base64":26}],26:[function(e,t,n){/*
 * Copyright 2011 Mozilla Foundation and contributors
 * Licensed under the New BSD license. See LICENSE or:
 * http://opensource.org/licenses/BSD-3-Clause
 */
var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");n.encode=function(e){if(0<=e&&e<r.length)return r[e];throw new TypeError("Must be between 0 and 63: "+e)},n.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}},{}],27:[function(e,t,n){function r(e,t,o,i,s,u){var a=Math.floor((t-e)/2)+e,c=s(o,i[a],!0);return 0===c?a:c>0?t-a>1?r(a,t,o,i,s,u):u==n.LEAST_UPPER_BOUND?t<i.length?t:-1:a:a-e>1?r(e,a,o,i,s,u):u==n.LEAST_UPPER_BOUND?a:e<0?-1:e}/*
 * Copyright 2011 Mozilla Foundation and contributors
 * Licensed under the New BSD license. See LICENSE or:
 * http://opensource.org/licenses/BSD-3-Clause
 */
n.GREATEST_LOWER_BOUND=1,n.LEAST_UPPER_BOUND=2,n.search=function(e,t,o,i){if(0===t.length)return-1;var s=r(-1,t.length,e,t,o,i||n.GREATEST_LOWER_BOUND);if(s<0)return-1;for(;s-1>=0&&0===o(t[s],t[s-1],!0);)--s;return s}},{}],28:[function(e,t,n){/*
 * Copyright 2011 Mozilla Foundation and contributors
 * Licensed under the New BSD license. See LICENSE or:
 * http://opensource.org/licenses/BSD-3-Clause
 */
function r(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function o(e,t){return Math.round(e+Math.random()*(t-e))}function i(e,t,n,s){if(n<s){var u=n-1;r(e,o(n,s),s);for(var a=e[s],c=n;c<s;c++)t(e[c],a)<=0&&r(e,u+=1,c);r(e,u+1,c);var l=u+1;i(e,t,n,l-1),i(e,t,l+1,s)}}n.quickSort=function(e,t){i(e,t,0,e.length-1)}},{}],29:[function(e,t,n){function r(e){var t=e;return"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,""))),null!=t.sections?new s(t):new o(t)}function o(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var n=u.getArg(t,"version"),r=u.getArg(t,"sources"),o=u.getArg(t,"names",[]),i=u.getArg(t,"sourceRoot",null),s=u.getArg(t,"sourcesContent",null),a=u.getArg(t,"mappings"),l=u.getArg(t,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);r=r.map(String).map(u.normalize).map(function(e){return i&&u.isAbsolute(i)&&u.isAbsolute(e)?u.relative(i,e):e}),this._names=c.fromArray(o.map(String),!0),this._sources=c.fromArray(r,!0),this.sourceRoot=i,this.sourcesContent=s,this._mappings=a,this.file=l}function i(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function s(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var n=u.getArg(t,"version"),o=u.getArg(t,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new c,this._names=new c;var i={line:-1,column:0};this._sections=o.map(function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var t=u.getArg(e,"offset"),n=u.getArg(t,"line"),o=u.getArg(t,"column");if(n<i.line||n===i.line&&o<i.column)throw new Error("Section offsets must be ordered and non-overlapping.");return i=t,{generatedOffset:{generatedLine:n+1,generatedColumn:o+1},consumer:new r(u.getArg(e,"map"))}})}/*
 * Copyright 2011 Mozilla Foundation and contributors
 * Licensed under the New BSD license. See LICENSE or:
 * http://opensource.org/licenses/BSD-3-Clause
 */
var u=e("./util"),a=e("./binary-search"),c=e("./array-set").ArraySet,l=e("./base64-vlq"),p=e("./quick-sort").quickSort;r.fromSourceMap=function(e){return o.fromSourceMap(e)},r.prototype._version=3,r.prototype.__generatedMappings=null,Object.defineProperty(r.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),r.prototype.__originalMappings=null,Object.defineProperty(r.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),r.prototype._charIsMappingSeparator=function(e,t){var n=e.charAt(t);return";"===n||","===n},r.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},r.GENERATED_ORDER=1,r.ORIGINAL_ORDER=2,r.GREATEST_LOWER_BOUND=1,r.LEAST_UPPER_BOUND=2,r.prototype.eachMapping=function(e,t,n){var o,i=t||null;switch(n||r.GENERATED_ORDER){case r.GENERATED_ORDER:o=this._generatedMappings;break;case r.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var s=this.sourceRoot;o.map(function(e){var t=null===e.source?null:this._sources.at(e.source);return null!=t&&null!=s&&(t=u.join(s,t)),{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}},this).forEach(e,i)},r.prototype.allGeneratedPositionsFor=function(e){var t=u.getArg(e,"line"),n={source:u.getArg(e,"source"),originalLine:t,originalColumn:u.getArg(e,"column",0)};if(null!=this.sourceRoot&&(n.source=u.relative(this.sourceRoot,n.source)),!this._sources.has(n.source))return[];n.source=this._sources.indexOf(n.source);var r=[],o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",u.compareByOriginalPositions,a.LEAST_UPPER_BOUND);if(o>=0){var i=this._originalMappings[o];if(void 0===e.column)for(var s=i.originalLine;i&&i.originalLine===s;)r.push({line:u.getArg(i,"generatedLine",null),column:u.getArg(i,"generatedColumn",null),lastColumn:u.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++o];else for(var c=i.originalColumn;i&&i.originalLine===t&&i.originalColumn==c;)r.push({line:u.getArg(i,"generatedLine",null),column:u.getArg(i,"generatedColumn",null),lastColumn:u.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++o]}return r},n.SourceMapConsumer=r,(o.prototype=Object.create(r.prototype)).consumer=r,o.fromSourceMap=function(e){var t=Object.create(o.prototype),n=t._names=c.fromArray(e._names.toArray(),!0),r=t._sources=c.fromArray(e._sources.toArray(),!0);t.sourceRoot=e._sourceRoot,t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot),t.file=e._file;for(var s=e._mappings.toArray().slice(),a=t.__generatedMappings=[],l=t.__originalMappings=[],f=0,g=s.length;f<g;f++){var h=s[f],b=new i;b.generatedLine=h.generatedLine,b.generatedColumn=h.generatedColumn,h.source&&(b.source=r.indexOf(h.source),b.originalLine=h.originalLine,b.originalColumn=h.originalColumn,h.name&&(b.name=n.indexOf(h.name)),l.push(b)),a.push(b)}return p(t.__originalMappings,u.compareByOriginalPositions),t},o.prototype._version=3,Object.defineProperty(o.prototype,"sources",{get:function(){return this._sources.toArray().map(function(e){return null!=this.sourceRoot?u.join(this.sourceRoot,e):e},this)}}),o.prototype._parseMappings=function(e,t){for(var n,r,o,s,a,c=1,f=0,g=0,h=0,b=0,d=0,m=e.length,v=0,_={},y={},w=[],S=[];v<m;)if(";"===e.charAt(v))c++,v++,f=0;else if(","===e.charAt(v))v++;else{for((n=new i).generatedLine=c,s=v;s<m&&!this._charIsMappingSeparator(e,s);s++);if(r=e.slice(v,s),o=_[r])v+=r.length;else{for(o=[];v<s;)l.decode(e,v,y),a=y.value,v=y.rest,o.push(a);if(2===o.length)throw new Error("Found a source, but no line and column");if(3===o.length)throw new Error("Found a source and line, but no column");_[r]=o}n.generatedColumn=f+o[0],f=n.generatedColumn,o.length>1&&(n.source=b+o[1],b+=o[1],n.originalLine=g+o[2],g=n.originalLine,n.originalLine+=1,n.originalColumn=h+o[3],h=n.originalColumn,o.length>4&&(n.name=d+o[4],d+=o[4])),S.push(n),"number"==typeof n.originalLine&&w.push(n)}p(S,u.compareByGeneratedPositionsDeflated),this.__generatedMappings=S,p(w,u.compareByOriginalPositions),this.__originalMappings=w},o.prototype._findMapping=function(e,t,n,r,o,i){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[r]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[r]);return a.search(e,t,o,i)},o.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},o.prototype.originalPositionFor=function(e){var t={generatedLine:u.getArg(e,"line"),generatedColumn:u.getArg(e,"column")},n=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",u.compareByGeneratedPositionsDeflated,u.getArg(e,"bias",r.GREATEST_LOWER_BOUND));if(n>=0){var o=this._generatedMappings[n];if(o.generatedLine===t.generatedLine){var i=u.getArg(o,"source",null);null!==i&&(i=this._sources.at(i),null!=this.sourceRoot&&(i=u.join(this.sourceRoot,i)));var s=u.getArg(o,"name",null);return null!==s&&(s=this._names.at(s)),{source:i,line:u.getArg(o,"originalLine",null),column:u.getArg(o,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}},o.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e}))},o.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(e=u.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var n;if(null!=this.sourceRoot&&(n=u.urlParse(this.sourceRoot))){var r=e.replace(/^file:\/\//,"");if("file"==n.scheme&&this._sources.has(r))return this.sourcesContent[this._sources.indexOf(r)];if((!n.path||"/"==n.path)&&this._sources.has("/"+e))return this.sourcesContent[this._sources.indexOf("/"+e)]}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},o.prototype.generatedPositionFor=function(e){var t=u.getArg(e,"source");if(null!=this.sourceRoot&&(t=u.relative(this.sourceRoot,t)),!this._sources.has(t))return{line:null,column:null,lastColumn:null};var n={source:t=this._sources.indexOf(t),originalLine:u.getArg(e,"line"),originalColumn:u.getArg(e,"column")},o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",u.compareByOriginalPositions,u.getArg(e,"bias",r.GREATEST_LOWER_BOUND));if(o>=0){var i=this._originalMappings[o];if(i.source===n.source)return{line:u.getArg(i,"generatedLine",null),column:u.getArg(i,"generatedColumn",null),lastColumn:u.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},n.BasicSourceMapConsumer=o,(s.prototype=Object.create(r.prototype)).constructor=r,s.prototype._version=3,Object.defineProperty(s.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var n=0;n<this._sections[t].consumer.sources.length;n++)e.push(this._sections[t].consumer.sources[n]);return e}}),s.prototype.originalPositionFor=function(e){var t={generatedLine:u.getArg(e,"line"),generatedColumn:u.getArg(e,"column")},n=a.search(t,this._sections,function(e,t){var n=e.generatedLine-t.generatedOffset.generatedLine;return n||e.generatedColumn-t.generatedOffset.generatedColumn}),r=this._sections[n];return r?r.consumer.originalPositionFor({line:t.generatedLine-(r.generatedOffset.generatedLine-1),column:t.generatedColumn-(r.generatedOffset.generatedLine===t.generatedLine?r.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},s.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},s.prototype.sourceContentFor=function(e,t){for(var n=0;n<this._sections.length;n++){var r=this._sections[n].consumer.sourceContentFor(e,!0);if(r)return r}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},s.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var n=this._sections[t];if(-1!==n.consumer.sources.indexOf(u.getArg(e,"source"))){var r=n.consumer.generatedPositionFor(e);if(r)return{line:r.line+(n.generatedOffset.generatedLine-1),column:r.column+(n.generatedOffset.generatedLine===r.line?n.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},s.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var r=this._sections[n],o=r.consumer._generatedMappings,i=0;i<o.length;i++){var s=o[i],a=r.consumer._sources.at(s.source);null!==r.consumer.sourceRoot&&(a=u.join(r.consumer.sourceRoot,a)),this._sources.add(a),a=this._sources.indexOf(a);var c=r.consumer._names.at(s.name);this._names.add(c),c=this._names.indexOf(c);var l={source:a,generatedLine:s.generatedLine+(r.generatedOffset.generatedLine-1),generatedColumn:s.generatedColumn+(r.generatedOffset.generatedLine===s.generatedLine?r.generatedOffset.generatedColumn-1:0),originalLine:s.originalLine,originalColumn:s.originalColumn,name:c};this.__generatedMappings.push(l),"number"==typeof l.originalLine&&this.__originalMappings.push(l)}p(this.__generatedMappings,u.compareByGeneratedPositionsDeflated),p(this.__originalMappings,u.compareByOriginalPositions)},n.IndexedSourceMapConsumer=s},{"./array-set":24,"./base64-vlq":25,"./binary-search":27,"./quick-sort":28,"./util":30}],30:[function(e,t,n){function r(e){var t=e.match(c);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}function o(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function i(e){var t=e,i=r(e);if(i){if(!i.path)return e;t=i.path}for(var s,u=n.isAbsolute(t),a=t.split(/\/+/),c=0,l=a.length-1;l>=0;l--)"."===(s=a[l])?a.splice(l,1):".."===s?c++:c>0&&(""===s?(a.splice(l+1,c),c=0):(a.splice(l,2),c--));return""===(t=a.join("/"))&&(t=u?"/":"."),i?(i.path=t,o(i)):t}function s(e){return e}function u(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var n=t-10;n>=0;n--)if(36!==e.charCodeAt(n))return!1;return!0}function a(e,t){return e===t?0:e>t?1:-1}n.getArg=/*
 * Copyright 2011 Mozilla Foundation and contributors
 * Licensed under the New BSD license. See LICENSE or:
 * http://opensource.org/licenses/BSD-3-Clause
 */
function(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')};var c=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,l=/^data:.+\,.+$/;n.urlParse=r,n.urlGenerate=o,n.normalize=i,n.join=function(e,t){""===e&&(e="."),""===t&&(t=".");var n=r(t),s=r(e);if(s&&(e=s.path||"/"),n&&!n.scheme)return s&&(n.scheme=s.scheme),o(n);if(n||t.match(l))return t;if(s&&!s.host&&!s.path)return s.host=t,o(s);var u="/"===t.charAt(0)?t:i(e.replace(/\/+$/,"")+"/"+t);return s?(s.path=u,o(s)):u},n.isAbsolute=function(e){return"/"===e.charAt(0)||!!e.match(c)},n.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var n=0;0!==t.indexOf(e+"/");){var r=e.lastIndexOf("/");if(r<0)return t;if((e=e.slice(0,r)).match(/^([^\/]+:\/)?\/*$/))return t;++n}return Array(n+1).join("../")+t.substr(e.length+1)};var p=!("__proto__"in Object.create(null));n.toSetString=p?s:function(e){return u(e)?"$"+e:e},n.fromSetString=p?s:function(e){return u(e)?e.slice(1):e},n.compareByOriginalPositions=function(e,t,n){var r=e.source-t.source;return 0!==r?r:0!=(r=e.originalLine-t.originalLine)?r:0!=(r=e.originalColumn-t.originalColumn)||n?r:0!=(r=e.generatedColumn-t.generatedColumn)?r:0!=(r=e.generatedLine-t.generatedLine)?r:e.name-t.name},n.compareByGeneratedPositionsDeflated=function(e,t,n){var r=e.generatedLine-t.generatedLine;return 0!==r?r:0!=(r=e.generatedColumn-t.generatedColumn)||n?r:0!=(r=e.source-t.source)?r:0!=(r=e.originalLine-t.originalLine)?r:0!=(r=e.originalColumn-t.originalColumn)?r:e.name-t.name},n.compareByGeneratedPositionsInflated=function(e,t){var n=e.generatedLine-t.generatedLine;return 0!==n?n:0!=(n=e.generatedColumn-t.generatedColumn)?n:0!==(n=a(e.source,t.source))?n:0!=(n=e.originalLine-t.originalLine)?n:0!=(n=e.originalColumn-t.originalColumn)?n:a(e.name,t.name)}},{}],31:[function(e,t,n){!function(r,o){"use strict";"object"==typeof n?t.exports=o(e("source-map/lib/source-map-consumer"),e("stackframe")):r.StackTraceGPS=o(r.SourceMap||r.sourceMap,r.StackFrame)}(this,function(e,t){"use strict";function n(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("get",e),r.onerror=n,r.onreadystatechange=function(){4===r.readyState&&(r.status>=200&&r.status<300||"file://"===e.substr(0,7)&&r.responseText?t(r.responseText):n(new Error("HTTP status: "+r.status+" retrieving "+e)))},r.send()})}function r(e){if("undefined"!=typeof window&&window.atob)return window.atob(e);throw new Error("You must supply a polyfill for window.atob in this environment")}function o(e){if("undefined"!=typeof JSON&&JSON.parse)return JSON.parse(e);throw new Error("You must supply a polyfill for JSON.parse in this environment")}function i(e,t){for(var n=[/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,/function\s+([^('"`]*?)\s*\(([^)]*)\)/,/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,/\b(?!(?:if|for|switch|while|with|catch)\b)(?:(?:static)\s+)?(\S+)\s*\(.*?\)\s*\{/,/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*\(.*?\)\s*=>/],r=e.split("\n"),o="",i=Math.min(t,20),s=0;s<i;++s){var u=r[t-s-1],a=u.indexOf("//");if(a>=0&&(u=u.substr(0,a)),u){o=u+o;for(var c=n.length,l=0;l<c;l++){var p=n[l].exec(o);if(p&&p[1])return p[1]}}}}function s(){if("function"!=typeof Object.defineProperty||"function"!=typeof Object.create)throw new Error("Unable to consume source maps in older browsers")}function u(e){if("object"!=typeof e)throw new TypeError("Given StackFrame is not an object");if("string"!=typeof e.fileName)throw new TypeError("Given file name is not a String");if("number"!=typeof e.lineNumber||e.lineNumber%1!=0||e.lineNumber<1)throw new TypeError("Given line number must be a positive integer");if("number"!=typeof e.columnNumber||e.columnNumber%1!=0||e.columnNumber<0)throw new TypeError("Given column number must be a non-negative integer");return!0}function a(e){for(var t,n,r=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)\s*$/gm;n=r.exec(e);)t=n[1];if(t)return t;throw new Error("sourceMappingURL not found")}function c(e,n,r){return new Promise(function(o,i){var s=n.originalPositionFor({line:e.lineNumber,column:e.columnNumber});if(s.source){var u=n.sourceContentFor(s.source);u&&(r[s.source]=u),o(new t({functionName:s.name||e.functionName,args:e.args,fileName:s.source,lineNumber:s.line,columnNumber:s.column}))}else i(new Error("Could not get original source for given stackframe and source map"))})}return function l(p){if(!(this instanceof l))return new l(p);p=p||{},this.sourceCache=p.sourceCache||{},this.sourceMapConsumerCache=p.sourceMapConsumerCache||{},this.ajax=p.ajax||n,this._atob=p.atob||r,this._get=function(e){return new Promise(function(t,n){var r="data:"===e.substr(0,5);if(this.sourceCache[e])t(this.sourceCache[e]);else if(p.offline&&!r)n(new Error("Cannot make network requests in offline mode"));else if(r){var o=e.match(/^data:application\/json;([\w=:"-]+;)*base64,/);if(o){var i=o[0].length,s=e.substr(i),u=this._atob(s);this.sourceCache[e]=u,t(u)}else n(new Error("The encoding of the inline sourcemap is not supported"))}else{var a=this.ajax(e,{method:"get"});this.sourceCache[e]=a,a.then(t,n)}}.bind(this))},this._getSourceMapConsumer=function(t,n){return new Promise(function(r,i){if(this.sourceMapConsumerCache[t])r(this.sourceMapConsumerCache[t]);else{var s=new Promise(function(r,i){return this._get(t).then(function(t){"string"==typeof t&&(t=o(t.replace(/^\)\]\}'/,""))),void 0===t.sourceRoot&&(t.sourceRoot=n),r(new e.SourceMapConsumer(t))},i)}.bind(this));this.sourceMapConsumerCache[t]=s,r(s)}}.bind(this))},this.pinpoint=function(e){return new Promise(function(t,n){this.getMappedLocation(e).then(function(e){function n(){t(e)}this.findFunctionName(e).then(t,n).catch(n)}.bind(this),n)}.bind(this))},this.findFunctionName=function(e){return new Promise(function(n,r){u(e),this._get(e.fileName).then(function(r){var o=e.lineNumber,s=e.columnNumber,u=i(r,o);n(u?new t({functionName:u,args:e.args,fileName:e.fileName,lineNumber:o,columnNumber:s}):e)},r).catch(r)}.bind(this))},this.getMappedLocation=function(e){return new Promise(function(t,n){s(),u(e);var r=this.sourceCache,o=e.fileName;this._get(o).then(function(n){var i=a(n),s="data:"===i.substr(0,5),u=o.substring(0,o.lastIndexOf("/")+1);return"/"===i[0]||s||/^https?:\/\/|^\/\//i.test(i)||(i=u+i),this._getSourceMapConsumer(i,u).then(function(n){return c(e,n,r).then(t).catch(function(){t(e)})})}.bind(this),n).catch(n)}.bind(this))}}})},{"source-map/lib/source-map-consumer":29,stackframe:23}],32:[function(e,t,n){!function(r,o){"use strict";"object"==typeof n?t.exports=o(e("error-stack-parser"),e("stack-generator"),e("stacktrace-gps")):r.StackTrace=o(r.ErrorStackParser,r.StackGenerator,r.StackTraceGPS)}(this,function(e,t,n){function r(e,t){var n={};return[e,t].forEach(function(e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}),n}function o(e){return e.stack||e["opera#sourceloc"]}function i(e,t){return"function"==typeof t?e.filter(t):e}var s={filter:function(e){return-1===(e.functionName||"").indexOf("StackTrace$$")&&-1===(e.functionName||"").indexOf("ErrorStackParser$$")&&-1===(e.functionName||"").indexOf("StackTraceGPS$$")&&-1===(e.functionName||"").indexOf("StackGenerator$$")},sourceCache:{}},u=function(){try{throw new Error}catch(e){return e}};return{get:function(e){var t=u();return o(t)?this.fromError(t,e):this.generateArtificially(e)},getSync:function(n){n=r(s,n);var a=u();return i(o(a)?e.parse(a):t.backtrace(n),n.filter)},fromError:function(t,o){o=r(s,o);var u=new n(o);return new Promise(function(n){var r=i(e.parse(t),o.filter);n(Promise.all(r.map(function(e){return new Promise(function(t){function n(){t(e)}u.pinpoint(e).then(t,n).catch(n)})})))}.bind(this))},generateArtificially:function(e){e=r(s,e);var n=t.backtrace(e);return"function"==typeof e.filter&&(n=n.filter(e.filter)),Promise.resolve(n)},instrument:function(e,t,n,r){if("function"!=typeof e)throw new Error("Cannot instrument non-function object");if("function"==typeof e.__stacktraceOriginalFn)return e;var i=function(){try{return this.get().then(t,n).catch(n),e.apply(r||this,arguments)}catch(e){throw o(e)&&this.fromError(e).then(t,n).catch(n),e}}.bind(this);return i.__stacktraceOriginalFn=e,i},deinstrument:function(e){if("function"!=typeof e)throw new Error("Cannot de-instrument non-function object");return"function"==typeof e.__stacktraceOriginalFn?e.__stacktraceOriginalFn:e},report:function(e,t,n,r){return new Promise(function(o,i){var s=new XMLHttpRequest;if(s.onerror=i,s.onreadystatechange=function(){4===s.readyState&&(s.status>=200&&s.status<400?o(s.responseText):i(new Error("POST to "+t+" failed with status: "+s.status)))},s.open("post",t),s.setRequestHeader("Content-Type","application/json"),r&&"object"==typeof r.headers){var u=r.headers;for(var a in u)u.hasOwnProperty(a)&&s.setRequestHeader(a,u[a])}var c={stack:e};void 0!==n&&null!==n&&(c.message=n),s.send(JSON.stringify(c))})}}})},{"error-stack-parser":21,"stack-generator":22,"stacktrace-gps":31}]},{},[4])(4)});
